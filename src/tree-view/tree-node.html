<template class="${model.hasChildren ? 'tree-node--node' : 'tree-node--leaf'} ${model.selected ? 'tree-node--selected' : ''}">
  <require from="./tree-node.css"></require>
  <div if.bind="!model._template">
    <ul show.bind="model.visible" class="tree-node__wrapper">
      <li>
        <div class="tree-node__title-wrapper">
          <span if.bind="model.hasChildren" click.trigger="toggleNode()" class="material-icons tree-node-arrow ${ model.loading ? 'tree-node-rotate' : '' }">
            ${ model.loading ? 'cached' : (model.expanded ? 'keyboard_arrow_down' : 'keyboard_arrow_right') }
          </span>
          <span click.delegate="selectNode()" class="tree-node-title tree-node-title__pad-right ${ model.hasChildren ? '' : 'tree-node-title__pad-left' }">${model.title}</span>
        </div>

        <tree-node repeat.for="node of model.children" model.bind="node"></tree-node>

      </li>
    </ul>
  </div>
  <div if.bind="model._template" ref="templateTarget"></div>
</template>
