<template>
  <require from="./node-template-commands.css"></require>
  <div class="node-template-commands-sample">
    <h2>This is unfinished and doesn't work</h2>
    <tree-view nodes.bind="nodes" view-model.ref="tree">
      <tree-node-template model.bind="nodeInterface">
        <ul show.bind="model.visible" class="tree-node__wrapper">
          <li>
            <div class="tree-node__title-wrapper">
              <span if.bind="model.hasChildren" click.trigger="toggleNode()" class="material-icons tree-node-arrow ${ model.loading ? 'tree-node-rotate' : '' }">
                ${ model.loading ? 'cached' : (model.expanded ? 'keyboard_arrow_down' : 'keyboard_arrow_right') }
              </span>
              <span click.delegate="focusNode($event, true)" class="tree-node-title tree-node-title__pad-right ${ model.hasChildren ? '' : 'tree-node-title__pad-left' }">
                <label if.bind="model._tree.multiSelect">
                  <input type="checkbox" checked.bind="model.selected" click.delegate="toggleSelected($event, true)" />
                </label> ${model.title}
              </span>
              <span style="flex-grow: 1;"></span>
              <span>
                <div class="dropdown">
                  <button class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown">
                    <i class="material-icons">more_vert</i>
                  </button>
                  <ul class="dropdown-menu">
                    <li repeat.for="cmd of commands" class="model-not-available-here"><a href="#" click.delegate="executeCommand(cmd, model)">${cmd.title} - ${model.title}</a></li>
                  </ul>
                </div>
              </span>
            </div>

            <tree-node repeat.for="node of model.children" model.bind="node"></tree-node>

          </li>
        </ul>
      </tree-node-template>
    </tree-view>
  </div>
  <logger view-model.ref="logger"></logger>

</template>
